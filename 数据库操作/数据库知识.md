# 关系型数据库

### 主键(primary key)

主键是用于数据表中的某一条记录的唯一性标识。一个表最多只有一个主键。主键不可以重复，不可以为空。

##### 单列主键：用一个字段来标识唯一性

![image-20200604211859058](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604211859058.png)

##### 联合主键：用多个字段联合标识唯一性（每个字段可以重复，但是这几个字段的组合不能重复）

![image-20200604212017675](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604212017675.png)



### 外键(foreign key)

可以把数据与另一张表的主键关联起来，这种列称为外键，外键是可以重复的。
如果一个A表中的主键，在另一个B表中存在，那么这个A表的主键称为B表的外键。由此可见，外键表示了两个表之间的联系。以另一个表的外键作主键的表被称为主表，具有此外键的表被称为主表的从表。



### 唯一键(unique key)

唯一键也是用于数据表中的某一条记录的唯一性标识，唯一键与主键一样也可以分为单列唯一键，多列唯一键

![image-20200604212302529](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604212302529.png)

唯一键与主键的区别在于：

1、主键不接受NULL值。唯一键可以接受一个NULL值。

2、表中只能有一个主键，但可以有多个唯一键。



### 索引(index)

索引用来快速地寻找那些具有特定值的记录，如果没有索引，执行查询时必须从第一个记录开始扫描整个表的所有记录，直至找到符合要求的记录。表里面的记录数量越多，这个操作的代价就越高。如果作为搜索条件的列上已经创建了索引，就无需扫描任何记录即可迅速得到目标记录所在的位置。

索引也可以分为单列索引，多列索引

![image-20200604212514374](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604212514374.png)

在需要**经常查询**的字段上建立索引

**普通索引** ：没有唯一性的限制

**唯一性索引** ：等同于将目标字段同时设置为**普通索引**与 **唯一键**，

![image-20200604212553337](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604212553337.png)

​                        主键一定是唯一性索引。创建表时，不能在同一个字段上建立两个索引(主键默认已建立了唯一性索引)





## 数据表的四种连接方式

### 内连接

**语法：**左表 [inner] join 右表 on 左表.字段 = 右表.字段：

从左表中取出每一条记录，去右表中与所有的记录进行匹配； 匹配必须是某个条件是左表中与右表中相同，才会保留结果，否则不保留；

![image-20200604214825976](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604214825976.png)

### 外连接

**语法：**左表 left/right join 右表 on 左表.字段 = 右表.字段

以某张表为主，取出里面的所有记录， 然后每条与另外一张表进行连接， 不管能不能匹配上条件，最终都会保留， 能匹配，正确保留； 不能匹配其他表的字段都置空null

左连接，以左表为主，右外连接以右表为主

![image-20200604214918356](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604214918356.png)

### 全连接

**语法：**左表 full join 右表 on 左表.字段 = 右表.字段

返回左右表的所有行。哪个表中没有的就用null填充。

![](https://gitee.com/sunny_ho/image_bed/raw/master/img/image-20200604215057132.png)

### 交叉连接

**语法：**左表 cross join 右表

交叉连接不带WHERE 子句，它将两个表的所有行进行组合，连接后的行数为两个表的行数的乘积数。



### 自然连接

**语法：**左表 natural join 右表

系统以字段名字作为匹配模式(同名字段作为字段，多个同名字段都作为条件)

自然内连接 ：select * from stu natural join cla

自然左外连接：select * from stu natural left join cla